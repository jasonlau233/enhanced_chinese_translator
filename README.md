# Enhanced Chinese Translator

[![PyPI version](https://badge.fury.io/py/enhanced-chinese-translator.svg)](https://badge.fury.io/py/enhanced-chinese-translator)
[![Python versions](https://img.shields.io/pypi/pyversions/enhanced-chinese-translator.svg)](https://pypi.org/project/enhanced-chinese-translator/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

ğŸš€ **ä¸“ä¸šçš„ä»£ç ä¸­æ–‡è½¬è‹±æ–‡ç¿»è¯‘å·¥å…·** - ä¸“é—¨ä¸ºå¼€å‘è€…è®¾è®¡çš„é«˜æ€§èƒ½ç¿»è¯‘å·¥å…·ï¼Œæ”¯æŒé¡¹ç›®ä»£ç å†…çš„æ³¨é‡Šã€printè¯­å¥ã€å­—ç¬¦ä¸²ç­‰ä¸­æ–‡å†…å®¹çš„æ‰¹é‡ç¿»è¯‘ï¼Œè®©æ‚¨çš„ä»£ç å›½é™…åŒ–æ›´ç®€å•ï¼

## ğŸ¯ ä¸»è¦ç”¨é€”

âœ¨ **ä»£ç æ³¨é‡Šç¿»è¯‘**: ä¸€é”®ç¿»è¯‘ Pythonã€JavaScriptã€Dartã€Java ç­‰å„ç§ç¼–ç¨‹è¯­è¨€çš„ä¸­æ–‡æ³¨é‡Š  
ğŸ“ **å­—ç¬¦ä¸²å†…å®¹ç¿»è¯‘**: æ™ºèƒ½è¯†åˆ«å¹¶ç¿»è¯‘ä»£ç ä¸­çš„ä¸­æ–‡å­—ç¬¦ä¸²å’Œprintè¯­å¥  
ğŸ”„ **æ‰¹é‡å¤„ç†**: æ”¯æŒæ•´ä¸ªé¡¹ç›®ç›®å½•çš„æ‰¹é‡ç¿»è¯‘ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡  
ğŸ¨ **æ ¼å¼ä¿æŒ**: å®Œç¾ä¿æŒä»£ç åŸæœ‰æ ¼å¼ã€ç¼©è¿›å’Œç»“æ„ä¸å˜  
âš¡ **å¤šçº¿ç¨‹å¤„ç†**: é«˜æ€§èƒ½å¹¶å‘ç¿»è¯‘ï¼Œå¿«é€Ÿå¤„ç†å¤§å‹é¡¹ç›®  

## ğŸ’¡ é€‚ç”¨åœºæ™¯

- ğŸŒ **ä»£ç å›½é™…åŒ–**: å°†ä¸­æ–‡ä»£ç é¡¹ç›®ç¿»è¯‘ä¸ºè‹±æ–‡ï¼Œä¾¿äºå›½é™…åä½œ
- ğŸ“š **å¼€æºé¡¹ç›®**: è®©ä¸­æ–‡å¼€æºé¡¹ç›®æ›´å®¹æ˜“è¢«å›½é™…å¼€å‘è€…ç†è§£
- ğŸ¢ **ä¼ä¸šé¡¹ç›®**: å…¬å¸ä»£ç åº“çš„å¤šè¯­è¨€æ”¯æŒå’Œè§„èŒƒåŒ–
- ğŸ“– **æ–‡æ¡£ç¿»è¯‘**: ä»£ç æ–‡æ¡£å’Œæ³¨é‡Šçš„ä¸“ä¸šç¿»è¯‘

## âœ¨ æ ¸å¿ƒç‰¹æ€§

ğŸš€ **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ä»£ç ä¸­çš„ä¸­æ–‡æ³¨é‡Šã€å­—ç¬¦ä¸²ã€printè¯­å¥ç­‰å†…å®¹  
ğŸ¯ **ç²¾å‡†ç¿»è¯‘**: åŸºäºç¼–ç¨‹ä¸Šä¸‹æ–‡çš„æ™ºèƒ½ç¿»è¯‘ï¼Œä¿æŒæŠ€æœ¯æœ¯è¯­å‡†ç¡®æ€§  
ğŸ’¾ **æ™ºèƒ½ç¼“å­˜**: çº¿ç¨‹å®‰å…¨çš„ç¿»è¯‘ç¼“å­˜ï¼Œé¿å…é‡å¤APIè°ƒç”¨ï¼ŒèŠ‚çœæˆæœ¬  
âš¡ **æ‰¹é‡å¤„ç†**: å¤šæ–‡ä»¶å¹¶å‘å¤„ç†ï¼Œæ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶ç±»å‹è¿‡æ»¤  
ğŸ›¡ï¸ **å®‰å…¨å¤‡ä»½**: ç¿»è¯‘å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼Œç¡®ä¿åŸå§‹ä»£ç å®‰å…¨  
ğŸ“Š **æ€§èƒ½ç›‘æ§**: è¯¦ç»†çš„å¤„ç†ç»Ÿè®¡å’Œè¿›åº¦è·Ÿè¸ª  

## ğŸ”§ æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€

- **å‰ç«¯å¼€å‘**: JavaScript (.js), TypeScript (.ts), Vue (.vue), React (.jsx, .tsx)
- **ç§»åŠ¨å¼€å‘**: Dart (.dart), Swift (.swift), Kotlin (.kt)  
- **åç«¯å¼€å‘**: Python (.py), Java (.java), C++ (.cpp), C# (.cs)
- **å…¶ä»–è¯­è¨€**: PHP (.php), Go (.go), Rust (.rs), Ruby (.rb)
- **é…ç½®æ–‡ä»¶**: JSON (.json), YAML (.yaml), XML (.xml)
- **æ–‡æ¡£æ–‡ä»¶**: Markdown (.md), æ–‡æœ¬æ–‡ä»¶ (.txt)

## Features

âœ¨ **Multi-threaded Processing**: Concurrent translation with configurable worker threads  
ğŸš€ **Batch Translation**: Process multiple texts simultaneously for improved efficiency  
ğŸ’¾ **Smart Caching**: Thread-safe translation cache to avoid duplicate API calls  
ğŸ¯ **Context-Aware**: Handles strings, comments, and code contexts intelligently  
âš¡ **Rate Limiting**: Built-in API rate limiting to prevent service throttling  
ğŸ“ **Directory Processing**: Batch process entire directories with file filtering  
ğŸ”„ **Multiple Services**: Support for Google Translate, Baidu, and other services  
ğŸ“Š **Performance Stats**: Detailed statistics and progress tracking  
ğŸ›¡ï¸ **Backup Support**: Automatic backup creation before translation  
ğŸ¨ **Smart Text Processing**: Preserves programming terms and handles mixed content

## Installation

### From PyPI (Recommended)

```bash
pip install enhanced-chinese-translator
```

### From Source

```bash
git clone https://github.com/enhanced-translator/enhanced-chinese-translator.git
cd enhanced-chinese-translator
pip install -e .
```

## Quick Start

### Command Line Usage

```bash
# Translate a single file
enhanced-chinese-translator my_file.py

# Use short command alias
ect my_file.py

# Translate entire directory
ect /path/to/project --patterns "*.py" "*.dart" "*.js"

# Advanced usage with custom settings
ect /path/to/project \
    --workers 10 \
    --batch-size 20 \
    --rate-limit 0.02 \
    --output /path/to/translated \
    --no-backup
```

### Python API Usage

```python
from enhanced_chinese_translator import EnhancedChineseTranslator

# Initialize translator
translator = EnhancedChineseTranslator(
    translation_service='google',
    max_workers=5,
    batch_size=10,
    rate_limit=0.05
)

# Translate a single file
success = translator.translate_file('my_file.py')

# Translate multiple files in directory
count = translator.translate_directory(
    '/path/to/project',
    file_patterns=['*.py', '*.dart'],
    backup=True
)

# Batch translate texts
texts = ["ä½ å¥½ä¸–ç•Œ", "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•", "ä¸­æ–‡ç¿»è¯‘"]
translations = translator.translate_texts_batch(texts)

# Print performance statistics
translator.print_performance_stats()
```

## Command Line Options

| Option | Description | Default |
|--------|-------------|---------|
| `path` | File or directory path to translate | `.` |
| `-o, --output` | Output file/directory path | In-place |
| `-s, --service` | Translation service (`google`, `baidu`) | `google` |
| `--patterns` | File patterns to match | All text files |
| `--no-backup` | Skip creating backup files | `False` |
| `--workers` | Maximum number of worker threads | `5` |
| `--batch-size` | Batch size for translations | `10` |
| `--rate-limit` | Rate limit between API calls (seconds) | `0.05` |

## Examples

### Basic File Translation

```bash
# Translate a Python file
ect my_script.py

# Translate with output to different file
ect input.py -o translated.py
```

### Directory Translation

```bash
# Translate all Python files in current directory
ect . --patterns "*.py"

# Translate Flutter project files
ect ./lib --patterns "*.dart" --workers 8

# Translate with custom output directory
ect ./src --patterns "*.js" "*.ts" -o ./translated_src
```

### Advanced Usage

```bash
# High-performance batch translation
ect ./project \
    --patterns "*.py" "*.dart" "*.js" \
    --workers 15 \
    --batch-size 25 \
    --rate-limit 0.01 \
    --output ./translated_project

# Translate without creating backups
ect ./docs --patterns "*.md" --no-backup
```

### Python API Examples

#### Basic Translation

```python
from enhanced_chinese_translator import EnhancedChineseTranslator

translator = EnhancedChineseTranslator()

# Translate single text
result = translator.translate_texts_batch(["ä½ å¥½ï¼Œä¸–ç•Œï¼"])
print(result[0])  # "Hello, world!"
```

#### Batch Processing

```python
# Process multiple texts efficiently
chinese_texts = [
    "è¿™æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬",
    "è¿™æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•æ–‡æœ¬", 
    "è¿™æ˜¯ç¬¬ä¸‰ä¸ªæµ‹è¯•æ–‡æœ¬"
]

translations = translator.translate_texts_batch(chinese_texts)
for original, translated in zip(chinese_texts, translations):
    print(f"{original} -> {translated}")
```

#### Directory Processing

```python
# Translate entire project
translator = EnhancedChineseTranslator(
    max_workers=10,
    batch_size=20
)

success_count = translator.translate_directory(
    './my_project',
    file_patterns=['*.py', '*.dart', '*.js'],
    output_dir='./translated_project',
    backup=True
)

print(f"Successfully translated {success_count} files")
```

## Supported File Types

The translator automatically detects and processes various file types:

- **Programming Languages**: `.py`, `.dart`, `.js`, `.ts`, `.java`, `.cpp`, `.c`, `.h`
- **Web Technologies**: `.html`, `.css`, `.scss`, `.vue`, `.jsx`, `.tsx`
- **Documentation**: `.md`, `.txt`, `.rst`, `.xml`, `.json`, `.yaml`
- **Configuration**: `.conf`, `.ini`, `.cfg`, `.properties`

## Translation Context Handling

The tool intelligently handles different contexts:

### String Literals
```python
# Before
message = "ç”¨æˆ·ç™»å½•å¤±è´¥"

# After  
message = "User login failed"
```

### Comments
```python
# Before
# è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å‡½æ•°
def important_function():
    pass

# After
# This is an important function  
def important_function():
    pass
```

### Mixed Content
```dart
// Before
/// è·å–ç”¨æˆ·ä¿¡æ¯çš„APIæ¥å£
Future<UserInfo> getUserInfo(String userId) {
  // å‘é€HTTPè¯·æ±‚
  return http.get('/api/user/$userId');
}

// After
/// API interface for getting user information
Future<UserInfo> getUserInfo(String userId) {
  // Send HTTP request
  return http.get('/api/user/$userId');
}
```

## Performance Features

### Multi-threading
- Concurrent translation processing
- Configurable worker thread count
- Thread-safe caching and rate limiting

### Batch Processing  
- Group multiple texts for efficient API usage
- Reduces API call overhead
- Optimized for large-scale translations

### Smart Caching
- Persistent translation cache
- Avoids duplicate API calls
- Thread-safe cache operations

### Rate Limiting
- Prevents API service throttling
- Configurable delay between requests  
- Per-thread rate limiting

## Configuration

### Environment Variables

```bash
# Set default translation service
export ECT_SERVICE=google

# Set default worker count
export ECT_WORKERS=8

# Set cache directory
export ECT_CACHE_DIR=/path/to/cache
```

### Configuration File

Create `~/.ect_config.json`:

```json
{
  "translation_service": "google",
  "max_workers": 8,
  "batch_size": 15,
  "rate_limit": 0.03,
  "backup": true,
  "default_patterns": ["*.py", "*.dart", "*.js"]
}
```

## Performance Statistics

The tool provides detailed performance metrics:

```
ğŸ“Š Performance Statistics:
  â”œâ”€ Total translations: 1,247
  â”œâ”€ Cache hit rate: 23.4%
  â”œâ”€ API calls made: 89
  â”œâ”€ Failed translations: 0 (0.0%)
  â”œâ”€ Total processing time: 45.67s
  â””â”€ Average time per translation: 36.6ms
```

## Troubleshooting

### Common Issues

**API Rate Limiting**
```bash
# Increase rate limit delay
ect myfile.py --rate-limit 0.1
```

**Large File Processing**
```bash
# Reduce batch size and workers
ect large_project/ --workers 3 --batch-size 5
```

**Memory Usage**
```bash
# Process files one at a time
ect project/ --workers 1 --batch-size 1
```

### Error Handling

The translator includes robust error handling:
- Network timeout recovery
- API service fallbacks  
- Partial translation recovery
- Progress preservation

## Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Development Setup

```bash
git clone https://github.com/enhanced-translator/enhanced-chinese-translator.git
cd enhanced-chinese-translator
pip install -e ".[dev]"
```

### Running Tests

```bash
pytest tests/
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Changelog

### Version 1.0.0
- Initial release
- Multi-threaded translation processing
- Batch translation support
- Smart caching system
- Rate limiting
- Directory processing
- Performance statistics
- Multiple translation services

## Support

- ğŸ“– [Documentation](https://github.com/jasonlau233/enhanced_chinese_translator/wiki)
- ğŸ› [Issue Tracker](https://github.com/jasonlau233/enhanced_chinese_translator/issues)
- ğŸ’¬ [Discussions](https://github.com/jasonlau233/enhanced_chinese_translator/discussions)

## Acknowledgments

- Thanks to all contributors who helped improve this tool
- Inspired by the need for efficient code translation workflows
- Special thanks to the open-source translation service providers

---

**Made with â¤ï¸ by the Enhanced Chinese Translator Team**